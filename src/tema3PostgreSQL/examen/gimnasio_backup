--
-- PostgreSQL database dump
--

\restrict rr89QN9NyFsDxPz1QEuELweQd40CEX0DcI2rrKhuPKmSuazrJLBcNZ6QfflWrWQ

-- Dumped from database version 18.1
-- Dumped by pg_dump version 18.1

-- Started on 2026-01-26 22:41:05

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 4 (class 2615 OID 2200)
-- Name: public; Type: SCHEMA; Schema: -; Owner: pg_database_owner
--

CREATE SCHEMA public;


ALTER SCHEMA public OWNER TO pg_database_owner;

--
-- TOC entry 5031 (class 0 OID 0)
-- Dependencies: 4
-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: pg_database_owner
--

COMMENT ON SCHEMA public IS 'standard public schema';


--
-- TOC entry 861 (class 1247 OID 16442)
-- Name: pago; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.pago AS (
	salariobase integer,
	comision integer
);


ALTER TYPE public.pago OWNER TO postgres;

--
-- TOC entry 223 (class 1255 OID 16462)
-- Name: calcular_salario_entrenador(character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.calcular_salario_entrenador(p_dni character varying) RETURNS integer
    LANGUAGE sql
    AS $$
    SELECT (salario).salariobase + (salario).comision 
    FROM entrenador
    WHERE dni = p_dni;
$$;


ALTER FUNCTION public.calcular_salario_entrenador(p_dni character varying) OWNER TO postgres;

--
-- TOC entry 224 (class 1255 OID 16463)
-- Name: subir_salario_entrenadores(); Type: PROCEDURE; Schema: public; Owner: postgres
--

CREATE PROCEDURE public.subir_salario_entrenadores()
    LANGUAGE plpgsql
    AS $$
BEGIN
	UPDATE entrenador
	SET salario = ROW((salario).salariobase*1.02, (salario).comision)::pago;

END;
$$;


ALTER PROCEDURE public.subir_salario_entrenadores() OWNER TO postgres;

--
-- TOC entry 225 (class 1255 OID 16464)
-- Name: subir_salarios_entrenadores(); Type: PROCEDURE; Schema: public; Owner: postgres
--

CREATE PROCEDURE public.subir_salarios_entrenadores()
    LANGUAGE plpgsql
    AS $$
BEGIN
    UPDATE entrenador
    SET salario = ROW((salario).salariobase * 1.02, (salario).comision)::pago;
END;
$$;


ALTER PROCEDURE public.subir_salarios_entrenadores() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 219 (class 1259 OID 16424)
-- Name: persona; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.persona (
    dni text NOT NULL,
    nombre text,
    apellidos text
);


ALTER TABLE public.persona OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 16451)
-- Name: cliente; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.cliente (
    NOT NULL dni,
    numerocliente integer,
    rutinas text[]
)
INHERITS (public.persona);


ALTER TABLE public.cliente OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16443)
-- Name: entrenador; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.entrenador (
    NOT NULL dni,
    especialidad text,
    salario public.pago
)
INHERITS (public.persona);


ALTER TABLE public.entrenador OWNER TO postgres;

--
-- TOC entry 5025 (class 0 OID 16451)
-- Dependencies: 222
-- Data for Name: cliente; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.cliente (dni, nombre, apellidos, numerocliente, rutinas) FROM stdin;
7444	Miguel	Leon Parra	2	{Pesas,Piernas}
321	Elena	Parra Gomez	3	\N
44444444D	Ana	López García	4	{Pilates,Yoga,Stretching}
55555555E	Carlos	Fernández Díaz	5	{Pesas,Cardio}
66666666F	Laura	Rodríguez Moreno	6	{Spinning,Cardio,Abdominales}
88888888H	Elena	Jiménez Vega	8	{Yoga}
76034	Sergio 	Leon Mateos	1	{piernas,gluteo,piernas,superior,inferior}
77777777G	Miguel	Torres Blanco	7	{running}
\.


--
-- TOC entry 5024 (class 0 OID 16443)
-- Dependencies: 221
-- Data for Name: entrenador; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.entrenador (dni, nombre, apellidos, especialidad, salario) FROM stdin;
0700	Antonia	Gomez Pala	Palabrotas	(2040,1230)
12345678A	Carlos	García López	Musculación	(1530,300)
23456789B	María	Fernández Martín	Cardio	(1428,250)
34567890C	Juan	Rodríguez Sánchez	Yoga	(1326,200)
45678901D	Ana	Martínez Pérez	Pilates	(1377,220)
56789012E	Luis	González Ruiz	Crossfit	(1632,350)
67890123F	Elena	López Hernández	Natación	(1479,280)
78901234G	Pedro	Sánchez Díaz	Spinning	(1428,240)
89012345H	Laura	Díaz Torres	Funcional	(1408,260)
\.


--
-- TOC entry 5023 (class 0 OID 16424)
-- Dependencies: 219
-- Data for Name: persona; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.persona (dni, nombre, apellidos) FROM stdin;
\.


--
-- TOC entry 4875 (class 2606 OID 16458)
-- Name: cliente cliente_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cliente
    ADD CONSTRAINT cliente_pkey PRIMARY KEY (dni);


--
-- TOC entry 4873 (class 2606 OID 16450)
-- Name: entrenador entrenador_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.entrenador
    ADD CONSTRAINT entrenador_pkey PRIMARY KEY (dni);


--
-- TOC entry 4871 (class 2606 OID 16431)
-- Name: persona persona_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persona
    ADD CONSTRAINT persona_pkey PRIMARY KEY (dni);


-- Completed on 2026-01-26 22:41:05

--
-- PostgreSQL database dump complete
--

\unrestrict rr89QN9NyFsDxPz1QEuELweQd40CEX0DcI2rrKhuPKmSuazrJLBcNZ6QfflWrWQ

